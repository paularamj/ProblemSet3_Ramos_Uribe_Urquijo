housing_chapinero$st<-housing_chapinero$surface_total
housing_chapinero$new_surface_2<-str_remove_all(housing_chapinero$new_surface,"metros")
housing_chapinero$new_surface_2<-str_remove_all(housing_chapinero$new_surface_2,"mt2")
housing_chapinero$new_surface_2<-str_remove_all(housing_chapinero$new_surface_2,"mts2")
housing_chapinero$new_surface_2<-str_remove_all(housing_chapinero$new_surface_2,"m2")
housing_chapinero$new_surface_2<-str_remove_all(housing_chapinero$new_surface_2,"mt")
housing_chapinero$new_surface_2<-str_remove_all(housing_chapinero$new_surface_2,"mts")
housing_chapinero$new_surface_2<-str_remove_all(housing_chapinero$new_surface_2, "[\n]")
housing_chapinero$new_surface_2<-str_remove_all(housing_chapinero$new_surface_2, "[ ]")
housing_chapinero$new_surface_2<-str_replace_all(housing_chapinero$new_surface_2, ",", ".")
#Lidiamos con . y , en la descipcion
housing_chapinero$new_surface_2<-str_replace_all(housing_chapinero$new_surface_2, "[:digit:]+[.]+[:digit:]+[:digit:]+[:digit:]",
str_remove_all(housing_chapinero$new_surface_2, "[.]"))
housing_chapinero$new_surface_2<-as.numeric(housing_chapinero$new_surface_2)
summary(housing_chapinero$new_surface_2)
## Poblado
housing_poblado$ns<-housing_poblado$new_surface
housing_poblado$st<-housing_poblado$surface_total
#Elimino todos los patrones de letras para poder extraer el numero de metros unicamente
housing_poblado$new_surface_2<-str_remove_all(housing_poblado$new_surface,"metros")
housing_poblado$new_surface_2<-str_remove_all(housing_poblado$new_surface_2,"mt2")
housing_poblado$new_surface_2<-str_remove_all(housing_poblado$new_surface_2,"mts2")
housing_poblado$new_surface_2<-str_remove_all(housing_poblado$new_surface_2,"m2")
housing_poblado$new_surface_2<-str_remove_all(housing_poblado$new_surface_2,"mt")
housing_poblado$new_surface_2<-str_remove_all(housing_poblado$new_surface_2,"mts")
#Elimina espacio y caracteres especiales
housing_poblado$new_surface_2<-str_remove_all(housing_poblado$new_surface_2, "[\n]")
housing_poblado$new_surface_2<-str_remove_all(housing_poblado$new_surface_2, "[ ]")
housing_poblado$new_surface_2<-str_replace_all(housing_poblado$new_surface_2, ",", ".")
#Lidiamos con . y , en la descipcion
housing_poblado$new_surface_2<-str_replace_all(housing_poblado$new_surface_2, "[:digit:]+[.]+[:digit:]+[:digit:]+[:digit:]",
str_remove_all(housing_poblado$new_surface_2, "[.]"))
#Convertir en numero
housing_poblado$new_surface_2<-as.numeric(housing_poblado$new_surface_2)
summary(housing_poblado$new_surface_2)
#Imputar Variables rescatadas de la descripción a surface_total
# Chapinero
housing_chapinero = housing_chapinero %>% group_by(MANZ_CCNCT) %>%
mutate(surface_total2 = ifelse(is.na(surface_total),
yes = new_surface_2,
no = surface_total))
# Poblado
housing_poblado = housing_poblado %>% group_by(MANZ_CCNCT) %>%
mutate(surface_total2 = ifelse(is.na(surface_total),
yes = new_surface_2,
no = surface_total))
## ===Medianas manzanas cercanas la mediana del area ===##
## load data
colnames(housing_chapinero)
colnames(housing_poblado)
## Mediana de la Manzana
# Chapinero
housing_chapinero = housing_chapinero %>%
group_by(MANZ_CCNCT) %>%
mutate(surface_mediana=median(surface_total,na.rm=T))
table(is.na(housing_chapinero$surface_total)) ## Tenemos 11.851 NAs
table(is.na(housing_chapinero$surface_total),
is.na(housing_chapinero$surface_mediana)) # logramos recuperar 1.389
# Poblado
housing_poblado = housing_poblado %>%
group_by(MANZ_CCNCT) %>%
mutate(surface_mediana=median(surface_total,na.rm=T))
table(is.na(housing_poblado$surface_total)) ## Tenemos 925 NAs
table(is.na(housing_poblado$surface_total),
is.na(housing_poblado$surface_mediana)) # logramos recuperar 108
#Imputar Medianas Manzanas
# Chapinero
housing_chapinero = housing_chapinero %>% group_by(MANZ_CCNCT) %>%
mutate(surface_total2 = ifelse(is.na(surface_total2),
yes = surface_mediana,
no = surface_total2))
# Poblado
housing_poblado = housing_poblado %>% group_by(MANZ_CCNCT) %>%
mutate(surface_total2 = ifelse(is.na(surface_total2),
yes = surface_mediana,
no = surface_total2))
#-----Volvemos a validar NAs
#Chapinero
table(is.na(housing_chapinero$surface_total2))
#Poblado
table(is.na(housing_poblado$surface_total2))
#Eliminamos NAs que no pudimos capturar
#Chapinero
housing_chapinero <- housing_chapinero[!is.na(housing_chapinero$surface_total2),]
#Poblado
housing_poblado <- housing_poblado[!is.na(housing_poblado$surface_total2),]
## ======Con criterio experto, revisamos los datos que tengan sentido respecto al area total ===== ##
#Chapinero
quantile(housing_chapinero$surface_total2, 0.9997)
summary(housing_chapinero$surface_total2)
#Eliminamos los outliers, quitando los aptos mayores a 2000
housing_chapinero<- housing_chapinero %>%
filter(surface_total2 <=2000)
#Eliminamos los outliers, esta vez dejando unicamente los aptos con 15 mts2 o mas
housing_chapinero<- housing_chapinero %>%
filter(surface_total2 >= 15)
ggplot(housing_chapinero, aes(x=surface_total2)) +
geom_boxplot(fill= "darkblue", alpha=0.4)
summary(housing_chapinero$surface_total2)
#Poblado
quantile(housing_poblado$surface_total2, 0.99)
summary(housing_poblado$surface_total2)
#Eliminamos los outliers, quitando los aptos mayores a 2000
housing_poblado<- housing_poblado %>%
filter(surface_total2 <=2000)
#Eliminamos los outliers, esta vez dejando unicamente los aptos con 10 mts2 o mas
housing_poblado<- housing_poblado %>%
filter(surface_total2 >= 15)
ggplot(housing_poblado, aes(x=surface_total2)) +
geom_boxplot(fill= "darkblue", alpha=0.4)
summary(housing_poblado$surface_total2)
########## Revisamos variable PISO #############
#================== Crear variable Piso con la información extraida de la descripcion ====================#
## Chapinero
housing_chapinero$new_piso<-str_remove_all(housing_chapinero$piso,"piso")
housing_chapinero$new_piso<-str_remove_all(housing_chapinero$new_piso, "[\n]")
housing_chapinero$new_piso<-as.numeric(housing_chapinero$new_piso)
summary(housing_chapinero$new_piso)
## Poblado
housing_poblado$new_piso<-str_remove_all(housing_poblado$piso,"piso")
housing_poblado$new_piso<-str_remove_all(housing_poblado$new_piso, "[\n]")
housing_poblado$new_piso<-as.numeric(housing_poblado$new_piso)
summary(housing_poblado$new_piso)
# ===Medianas manzanas cercanas mediana del piso ===##
## load data
colnames(housing_chapinero)
colnames(housing_poblado)
## Mediana de la Manzana
# Chapinero
housing_chapinero = housing_chapinero %>%
group_by(MANZ_CCNCT) %>%
mutate(piso_mediana=median(new_piso,na.rm=T))
table(is.na(housing_chapinero$new_piso)) ## Tenemos 12.379 NAs
table(is.na(housing_chapinero$new_piso),
is.na(housing_chapinero$piso_mediana)) # logramos recuperar 1.830
# Poblado
housing_poblado = housing_poblado %>%
group_by(MANZ_CCNCT) %>%
mutate(piso_mediana=median(new_piso,na.rm=T))
table(is.na(housing_poblado$new_piso)) ## Tenemos 1.146 NAs
table(is.na(housing_poblado$new_piso),
is.na(housing_poblado$piso_mediana)) # logramos recuperar 210
#Imputar Medianas Manzanas
# Chapinero
housing_chapinero = housing_chapinero %>% group_by(MANZ_CCNCT) %>%
mutate(new_piso_vf = ifelse(is.na(new_piso),
yes = piso_mediana,
no = new_piso))
# Poblado
housing_poblado = housing_poblado %>% group_by(MANZ_CCNCT) %>%
mutate(new_piso_vf = ifelse(is.na(new_piso),
yes = piso_mediana,
no = new_piso))
#-----Volvemos a validar NAs
#Chapinero
table(is.na(housing_chapinero$new_piso_vf))
#Poblado
table(is.na(housing_poblado$new_piso_vf))
#Eliminamos NAs que no pudimos capturar
#Chapinero
housing_chapinero <- housing_chapinero[!is.na(housing_chapinero$new_piso_vf),]
#Poblado
housing_poblado <- housing_poblado[!is.na(housing_poblado$new_piso_vf),]
## ======Con criterio experto, revisamos los datos que tengan sentido del piso ===== ##
#Chapinero
quantile(housing_chapinero$new_piso_vf, 0.99)
summary(housing_chapinero$new_piso_vf)
#Eliminamos los outliers, quitando los pisos mayores a 13
housing_chapinero<- housing_chapinero %>%
filter(new_piso_vf <=13)
ggplot(housing_chapinero, aes(x=new_piso_vf)) +
geom_boxplot(fill= "darkblue", alpha=0.4)
summary(housing_chapinero$new_piso_vf)
#Poblado
quantile(housing_poblado$new_piso_vf, 0.99)
summary(housing_poblado$new_piso_vf)
#Eliminamos los outliers, quitando los pisos mayores a 26
housing_poblado<- housing_poblado %>%
filter(new_piso_vf <=26)
ggplot(housing_poblado, aes(x=new_piso_vf)) +
geom_boxplot(fill= "darkblue", alpha=0.4)
summary(housing_poblado$new_piso_vf)
########## Revisamos variable ESTRATO #############
#================== Crear variable Estrato con la información extraida de la descripcion ====================#
## Chapinero
housing_chapinero$new_estrato<-str_remove_all(housing_chapinero$estrato,"estrato")
housing_chapinero$new_estrato<-str_remove_all(housing_chapinero$new_estrato, "[\n]")
housing_chapinero$new_estrato<-as.numeric(housing_chapinero$new_estrato)
summary(housing_chapinero$new_estrato)
## Poblado
housing_poblado$new_estrato<-str_remove_all(housing_poblado$estrato,"estrato")
housing_poblado$new_estrato<-str_remove_all(housing_poblado$new_estrato, "[\n]")
housing_poblado$new_estrato<-as.numeric(housing_poblado$new_estrato)
summary(housing_poblado$new_estrato)
### Decidimos realizar la imputación con la info del CENSO del DANE
##=== Cargar info de CENSO data para imputar estrato ===##
## load data
mnz_censo = import("http://eduard-martinez.github.io/data/fill-gis-vars/mnz_censo.rds")
## about data
browseURL("https://eduard-martinez.github.io/teaching/meca-4107/7-censo.txt")
#PARA BOGOTA
## load data bog
mgn_bog = import("dataPS3/Censo Bog/CNPV2018_MGN_A2_11.CSV")
colnames(mgn_bog)
distinct_all(mgn_bog[,c("UA_CLASE","COD_ENCUESTAS","U_VIVIENDA")]) %>% nrow()
hog_bog = import("dataPS3/Censo Bog/CNPV2018_2HOG_A2_11.CSV")
colnames(hog_bog)
distinct_all(hog_bog[,c("UA_CLASE","COD_ENCUESTAS","U_VIVIENDA","H_NROHOG")]) %>% nrow()
viv_bog = import("dataPS3/Censo Bog/CNPV2018_1VIV_A2_11.CSV")
colnames(viv_bog)
distinct_all(viv_bog[,c("COD_ENCUESTAS","U_VIVIENDA")]) %>% nrow()
## join data
viv_hog_bog = left_join(hog_bog,viv_bog,by=c("COD_ENCUESTAS","U_VIVIENDA","UA_CLASE"))
table(is.na(viv_hog_bog$VA1_ESTRATO))
data_bog = left_join(viv_hog_bog,mgn_bog,by=c("UA_CLASE","COD_ENCUESTAS","U_VIVIENDA"))
table(is.na(data_bog$VA1_ESTRATO))
## select vars
H_NRO_CUARTOS = "Número de cuartos en total"
HA_TOT_PER = "Total personas en el hogar"
V_TOT_HOG = "Total de hogares en la vivienda"
VA1_ESTRATO = "Estrato de la vivienda (según servicio de energía)"
COD_DANE_ANM = "Codigo DANE de manzana"
db_bog = data_bog %>% select(COD_DANE_ANM,H_NRO_CUARTOS,HA_TOT_PER,V_TOT_HOG,VA1_ESTRATO)
## summary data
df_bog = db_bog %>%
group_by(COD_DANE_ANM) %>%
summarise(med_H_NRO_CUARTOS=median(H_NRO_CUARTOS,na.rm=T),
sum_HA_TOT_PER=sum(HA_TOT_PER,na.rm=T),
med_V_TOT_HOG=median(V_TOT_HOG,na.rm=T),
med_VA1_ESTRATO=median(VA1_ESTRATO,na.rm=T))
## export data
export(df_bog,"dataPS3/Censo Bog/mnz_censo_bog.rds")
## Unimos las bases de Housing Chapinero y la del Censo de Bogota
colnames(df_bog)
colnames(housing_chapinero)
df_bog<-rename(df_bog, MANZ_CCNCT = COD_DANE_ANM)
housing_chapinero = left_join(housing_chapinero,df_bog,by=c("MANZ_CCNCT"))
#PARA ANTIOQUIA
## load data ant
mgn_ant = import("dataPS3/Censo Antioquia/CNPV2018_MGN_A2_05.CSV")
colnames(mgn_ant)
distinct_all(mgn_ant[,c("UA_CLASE","COD_ENCUESTAS","U_VIVIENDA")]) %>% nrow()
hog_ant = import("dataPS3/Censo Antioquia/CNPV2018_2HOG_A2_05.CSV")
colnames(hog_ant)
distinct_all(hog_ant[,c("UA_CLASE","COD_ENCUESTAS","U_VIVIENDA","H_NROHOG")]) %>% nrow()
viv_ant = import("dataPS3/Censo Antioquia/CNPV2018_1VIV_A2_05.CSV")
colnames(viv_ant)
distinct_all(viv_ant[,c("COD_ENCUESTAS","U_VIVIENDA")]) %>% nrow()
## join data
viv_hog_ant = left_join(hog_ant,viv_ant,by=c("COD_ENCUESTAS","U_VIVIENDA","UA_CLASE"))
table(is.na(viv_hog_ant$VA1_ESTRATO))
data_ant = left_join(viv_hog_ant,mgn_ant,by=c("UA_CLASE","COD_ENCUESTAS","U_VIVIENDA"))
table(is.na(data_ant$VA1_ESTRATO))
## select vars
H_NRO_CUARTOS = "Número de cuartos en total"
HA_TOT_PER = "Total personas en el hogar"
V_TOT_HOG = "Total de hogares en la vivienda"
VA1_ESTRATO = "Estrato de la vivienda (según servicio de energía)"
COD_DANE_ANM = "Codigo DANE de manzana"
db_ant = data_ant %>% select(COD_DANE_ANM,H_NRO_CUARTOS,HA_TOT_PER,V_TOT_HOG,VA1_ESTRATO)
## summary data
df_ant = db_ant %>%
group_by(COD_DANE_ANM) %>%
summarise(med_H_NRO_CUARTOS=median(H_NRO_CUARTOS,na.rm=T),
sum_HA_TOT_PER=sum(HA_TOT_PER,na.rm=T),
med_V_TOT_HOG=median(V_TOT_HOG,na.rm=T),
med_VA1_ESTRATO=median(VA1_ESTRATO,na.rm=T))
## export data
export(df_ant,"dataPS3/Censo Antioquia/mnz_censo_ant.rds")
## Unimos las bases de Housing Poblado y la del Censo de Antioquia
colnames(df_ant)
colnames(housing_poblado)
df_ant<-rename(df_ant, MANZ_CCNCT = COD_DANE_ANM)
housing_poblado = left_join(housing_poblado,df_ant,by=c("MANZ_CCNCT"))
# ===Medianas manzanas cercanas mediana del estrato ===##
## load data
colnames(housing_chapinero)
colnames(housing_poblado)
## Mediana de la Manzana
# Chapinero
housing_chapinero = housing_chapinero %>%
group_by(MANZ_CCNCT) %>%
mutate(estrato_mediana=median(new_estrato,na.rm=T))
table(is.na(housing_chapinero$new_estrato)) ## Tenemos 11.576 NAs
table(is.na(housing_chapinero$new_estrato),
is.na(housing_chapinero$estrato_mediana)) # logramos recuperar 2.329
# Poblado
housing_poblado = housing_poblado %>%
group_by(MANZ_CCNCT) %>%
mutate(estrato_mediana=median(new_estrato,na.rm=T))
table(is.na(housing_poblado$new_estrato)) ## Tenemos 958 NAs
table(is.na(housing_poblado$new_estrato),
is.na(housing_poblado$estrato_mediana)) # logramos recuperar 48
#Imputar Medianas Manzanas del estrato con info del censo
# Chapinero
housing_chapinero = housing_chapinero %>% group_by(MANZ_CCNCT) %>%
mutate(new_estrato_vf = ifelse(is.na(new_estrato),
yes = med_VA1_ESTRATO,
no = new_estrato))
# Poblado
housing_poblado = housing_poblado %>% group_by(MANZ_CCNCT) %>%
mutate(new_estrato_vf = ifelse(is.na(new_estrato),
yes = med_VA1_ESTRATO,
no = new_estrato))
#Imputar Medianas Manzanas del estrato con info de las manzanas del DANE
# Chapinero
housing_chapinero = housing_chapinero %>% group_by(MANZ_CCNCT) %>%
mutate(new_estrato_vf = ifelse(is.na(new_estrato_vf),
yes = estrato_mediana,
no = new_estrato_vf))
# Poblado
housing_poblado = housing_poblado %>% group_by(MANZ_CCNCT) %>%
mutate(new_estrato_vf = ifelse(is.na(new_estrato_vf),
yes = estrato_mediana,
no = new_estrato_vf))
#-----Volvemos a validar NAs
#Chapinero
table(is.na(housing_chapinero$new_estrato_vf))
#Poblado
table(is.na(housing_poblado$new_estrato_vf))
#Eliminamos NAs que no pudimos capturar
#Chapinero
housing_chapinero <- housing_chapinero[!is.na(housing_chapinero$new_estrato_vf),]
#Poblado
housing_poblado <- housing_poblado[!is.na(housing_poblado$new_estrato_vf),]
########## Revisamos variable CUARTOS #############
#================== Imputar NAs cuartos con info del censo ====================#
#Imputar Medianas Manzanas de los cuartos con info del censo
# Chapinero
housing_chapinero = housing_chapinero %>% group_by(MANZ_CCNCT) %>%
mutate(new_cuartos_vf = ifelse(is.na(rooms),
yes = med_H_NRO_CUARTOS,
no = rooms))
# Poblado
housing_poblado = housing_poblado %>% group_by(MANZ_CCNCT) %>%
mutate(new_cuartos_vf = ifelse(is.na(rooms),
yes = med_H_NRO_CUARTOS,
no = rooms))
## Mediana de la Manzana
# Chapinero
housing_chapinero = housing_chapinero %>%
group_by(MANZ_CCNCT) %>%
mutate(rooms_mediana=median(rooms,na.rm=T))
table(is.na(housing_chapinero$rooms)) ## Tenemos 5572 NAs
table(is.na(housing_chapinero$rooms),
is.na(housing_chapinero$rooms_mediana)) # logramos recuperar 66
# Poblado
housing_poblado = housing_poblado %>%
group_by(MANZ_CCNCT) %>%
mutate(rooms_mediana=median(rooms,na.rm=T))
table(is.na(housing_poblado$rooms)) ## Tenemos 915 NAs
table(is.na(housing_poblado$rooms),
is.na(housing_poblado$rooms_mediana)) # logramos recuperar 10
#Imputar Medianas Manzanas del # de cuartos con info de las manzanas del DANE
# Chapinero
housing_chapinero = housing_chapinero %>% group_by(MANZ_CCNCT) %>%
mutate(new_cuartos_vf = ifelse(is.na(new_cuartos_vf),
yes = rooms_mediana,
no = new_cuartos_vf))
# Poblado
housing_poblado = housing_poblado %>% group_by(MANZ_CCNCT) %>%
mutate(new_cuartos_vf = ifelse(is.na(new_cuartos_vf),
yes = rooms_mediana,
no = new_cuartos_vf))
########## Revisamos variable BAÑOS #############
#================== Imputar NAs baños con info manzanas del DANE ====================#
## Mediana de la Manzana
# Chapinero
housing_chapinero = housing_chapinero %>%
group_by(MANZ_CCNCT) %>%
mutate(baños_mediana=median(bathrooms,na.rm=T))
table(is.na(housing_chapinero$bathrooms)) ## Tenemos 2641 NAs
table(is.na(housing_chapinero$bathrooms),
is.na(housing_chapinero$baños_mediana)) # logramos recuperar 117
# Poblado
housing_poblado = housing_poblado %>%
group_by(MANZ_CCNCT) %>%
mutate(baños_mediana=median(bathrooms,na.rm=T))
table(is.na(housing_poblado$bathrooms)) ## Tenemos 375 NAs
table(is.na(housing_poblado$bathrooms),
is.na(housing_poblado$baños_mediana)) # logramos recuperar 4
#Imputar Medianas Manzanas del # de baños con info de las manzanas del DANE
# Chapinero
housing_chapinero = housing_chapinero %>% group_by(MANZ_CCNCT) %>%
mutate(new_baños_vf = ifelse(is.na(bathrooms),
yes = baños_mediana,
no = bathrooms))
# Poblado
housing_poblado = housing_poblado %>% group_by(MANZ_CCNCT) %>%
mutate(new_baños_vf = ifelse(is.na(bathrooms),
yes = baños_mediana,
no = bathrooms))
#-----Volvemos a validar NAs
#Chapinero
table(is.na(housing_chapinero$new_baños_vf))
#Poblado
table(is.na(housing_poblado$new_baños_vf))
#Eliminamos NAs que no pudimos capturar
#Chapinero
housing_chapinero <- housing_chapinero[!is.na(housing_chapinero$new_baños_vf),]
#Poblado
housing_poblado <- housing_poblado[!is.na(housing_poblado$new_baños_vf),]
#======================= SELECCION DE VARIABLES ======================#
#Chapinero
colnames(housing_chapinero)
colnames(housing_poblado)
#variables: new_piso_vf, new_estrato_vf, new_cuartos_vf, surface_total2, dist_bar, dist_parque, dist_banco,
#  dist_estacionbus, dist_police, price, bathrooms, property_type
#VALIDAMOS QUE NO TENEMOS NAs en las variables seleccionadas
sum(is.na(housing_chapinero$new_piso_vf))
sum(is.na(housing_chapinero$new_estrato_vf))
sum(is.na(housing_chapinero$new_cuartos_vf))
sum(is.na(housing_chapinero$surface_total2))
sum(is.na(housing_chapinero$dist_bar))
sum(is.na(housing_chapinero$dist_parque))
sum(is.na(housing_chapinero$dist_banco))
sum(is.na(housing_chapinero$dist_estacionbus))
sum(is.na(housing_chapinero$dist_police))
sum(is.na(housing_chapinero$price))
sum(is.na(housing_chapinero$new_baños_vf))
sum(is.na(housing_chapinero$property_type))
sum(is.na(housing_poblado$new_piso_vf))
sum(is.na(housing_poblado$new_estrato_vf))
sum(is.na(housing_poblado$new_cuartos_vf))
sum(is.na(housing_poblado$surface_total2))
sum(is.na(housing_poblado$dist_bar))
sum(is.na(housing_poblado$dist_parque))
sum(is.na(housing_poblado$dist_banco))
sum(is.na(housing_poblado$dist_estacionbus))
sum(is.na(housing_poblado$dist_police))
sum(is.na(housing_poblado$price))
sum(is.na(housing_poblado$new_baños_vf))
sum(is.na(housing_poblado$property_type))
#####Modelos######
#PredicciÃ³n del precio
##Arboles de decision
# pload(rpart)
#
# cp_alpha<-seq(from = 0, to = 0.1, length = 10)
# fiveStats <- function(...) c(twoClassSummary(...), defaultSummary(...))
# ctrl<- trainControl(method = "cv",
#                     number = 5,
#                     summaryFunction = fiveStats,
#                     classProbs = TRUE,
#                     verbose=FALSE,
#                     savePredictions = T)
# View(housing_chapinero)
# set.seed(123)
# housing_chapinero$property_type  <- as.factor(housing_chapinero$property_type)
# tree <- train( price ~ property_type,
#                data = housing_chapinero,
#                method = "rpart",
#                trControl = ctrl,
#                parms=list(split='Gini'),
#                #tuneGrid = expand.grid(cp = cp_alpha)#,
#                tuneLength=200,
# )
R.version.string
modelo_lm<-lm(price ~ new_piso_vf, new_estrato_vf, new_cuartos_vf, surface_total2,
dist_bar, dist_parque, dist_banco ,dist_estacionbus, dist_police,
bathrooms, property_type, data=housing_chapinero)
modelo_lm<-lm(price ~ new_piso_vf, new_estrato_vf, new_cuartos_vf, surface_total2,
dist_bar, dist_parque, dist_banco, dist_estacionbus, dist_police,
bathrooms, property_type, data=housing_chapinero)
colnames(housing_chapinero)
modelo_lm<-lm(price ~ new_piso_vf, new_estrato_vf, new_cuartos_vf, surface_total2,
dist_bar, dist_parque, dist_banco, dist_estacionbus, dist_police,
bathrooms, property_type, data=housing_chapinero)
modelo_lm<-lm(price ~ new_piso_vf, new_estrato_vf, new_cuartos_vf, surface_total2,
dist_bar, dist_parque, data=housing_chapinero)
class(housing_chapinero)
housing_chapinero<- as.data.frame(housing_chapinero)
modelo_lm<-lm(price ~ new_piso_vf, new_estrato_vf, new_cuartos_vf, surface_total2,
dist_bar, dist_parque, dist_banco, dist_estacionbus, dist_police,
bathrooms, property_type, data=housing_chapinero)
class(housing_chapinero)
modelo_lm<-lm(price ~ new_piso_vf, new_estrato_vf, new_cuartos_vf, surface_total2,
dist_bar, dist_parque, dist_banco, dist_estacionbus, dist_police,
bathrooms, property_type, data=housing_chapinero)
modelo_lm<-lm(price ~ new_piso_vf + new_estrato_vf + new_cuartos_vf + surface_total2 +
dist_bar+ dist_parque + dist_banco + dist_estacionbus + dist_police +
bathrooms + property_type, data=housing_chapinero)
stargazer(modelo_lm,
type = "html",
dep.var.labels = "Precio Vivienda Chapinero",
digits = 0
)
library(stargazer)
stargazer(modelo_lm,
type = "html",
dep.var.labels = "Precio Vivienda Chapinero",
digits = 0
)
stargazer(modelo_lm,
type = "text",
dep.var.labels = "Precio Vivienda Chapinero",
digits = 0
)
housing_chapinero$new_estrato_vf<-ceiling(housing_chapinero$new_estrato_vf)
summarise(housing_chapinero$new_estrato_vf)
sum(housing_chapinero$new_estrato_vf)
summary(housing_chapinero$new_estrato_vf)
table(housing_chapinero$new_estrato_vf)
modelo_lm<-lm(price ~ new_piso_vf + new_estrato_vf + new_cuartos_vf + surface_total2 +
dist_bar+ dist_parque + dist_banco + dist_estacionbus + dist_police +
bathrooms + property_type, data=housing_chapinero)
library(stargazer)
stargazer(modelo_lm,
type = "text",
dep.var.labels = "Precio Vivienda Chapinero",
digits = 0
)
